<div class="container deimos">

  <div>
    <acme-navbar></acme-navbar>
  </div>

  <h1>Deimos</h1>

  <!-- Navigation -->
  <div class="row">
    <div class="col-md-3">
      <div class="form-group has-feedback">
        <input type="text" class="form-control hasclear" placeholder="Search for..." ng-model="deimos.searchFilter"
               ng-change="deimos.updateSearchFilter();">
        <button class="btn btn-default" type="button" ng-click="deimos.searchFilter=''; deimos.updateSearchFilter();"
                ng-show="deimos.searchFilter">
          <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
        </button>
      </div>

      <!-- Category filter -->
      <h3>categories</h3>
      <treecontrol class="tree-boot" tree-model="deimos.categoryTreeData"
                   expanded-nodes="deimos.categoryTreeExpandedNodes" options="deimos.categoryTreeOptions"
                   on-selection="deimos.updateCategoryFilter(node, selected)" selected-nodes="deimos.selectedNodes">
        {{node.name}}
      </treecontrol>

      <button type="text" class="btn btn-default" ng-click="deimos.resetCategoryFilter()"
              ng-show="deimos.tableParams.hasFilter()">
        <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
        reset filter
      </button>
    </div>

    <!-- Content -->
    <div class="col-md-9">
      <div class="headerButtons">
        <a class="btn btn-default" ui-sref="import" role="button">
          <span class="glyphicon glyphicon-floppy-open" aria-hidden="true"></span>
          Import New
        </a>
        <span class="numberOfElements"><strong>Number of elements:</strong> {{deimos.tableParams.total()}}</span>
      </div>

      <!-- main data table -->
      <table ng-table="deimos.tableParams" class="table table-condensed">
        <tr ng-repeat="row in $data">
          <!--<td data-title="'export'" ng-click="deimos.openPreviewModal(row.dataId)">-->
          <!--<input type="checkbox" ng-model="deimos.selected[row.guid]"/>-->
          <!--</td>-->
          <td data-title="'Title'" sortable="'title'" data-toggle="modal"
              ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.title}}
          </td>
          <td data-title="'Description'" sortable="'description'" data-toggle="modal"
              ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.description}}
          </td>
          <td data-title="'Type'" sortable="'type'" data-toggle="modal" ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.type}}
          </td>
          <td data-title="'Privacy'" sortable="'privacy'" data-toggle="modal"
              ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.privacy}}
          </td>
          <td data-title="'Project ID'" sortable="'projectId'" data-toggle="modal"
              ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.projectId}}
          </td>
          <td data-title="'Import status'" sortable="'state'" data-toggle="modal"
              ng-click="deimos.openPreviewModal(row.dataId)">
            {{row.state}}
          </td>
          <td data-title="'Delete'">
            <button type="button" class="btn btn-default" ng-click="deimos.deleteDataset(row)"
                    uib-popover="This needs Ticket '#MARS-718' to be done!" popover-trigger="mouseenter">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </button>
          </td>
          <!--<td data-title="'User ID'" sortable="'userId'" data-toggle="modal" ng-click="deimos.openPreviewModal(row.dataId)">-->
          <!--{{row.userId}}-->
          <!--</td>-->
          <!--<td data-title="'Download URI'" sortable="'uri'" data-toggle="modal" ng-click="deimos.openPreviewModal(row.dataId)">-->
          <!--{{row.uri}}-->
          <!--</td>-->
        </tr>
      </table>

    </div>
  </div>

</div>
